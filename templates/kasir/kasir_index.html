{% extends 'base.html' %}

{% block title %}Kasir Dashboard - Restaurant QR{% endblock %}

{% block nav_title %}Kasir Dashboard{% endblock %}

{% block content %}
<div class="w-full max-w-7xl mx-auto p-4">
    <div class="mb-6">
        <div class="flex justify-between items-center">
            <h1 class="text-2xl font-bold text-blue-700">
                <i class="fas fa-cash-register mr-2"></i>
                Kasir Dashboard
            </h1>
            <div class="text-gray-500">
                <i class="fas fa-clock mr-1"></i>
                {{ "now"|date:"d/m/Y H:i" }}
            </div>
        </div>
    </div>

    <!-- Statistics Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="bg-gradient-to-r from-yellow-400 to-yellow-500 text-white rounded-xl shadow-lg p-5">
            <div class="flex justify-between items-start">
                <div>
                    <h4 class="text-2xl font-bold">{{ pesanan_pending }}</h4>
                    <p class="text-white/90">Pesanan Pending</p>
                </div>
                        <div class="align-self-center">
                            <i class="fas fa-hourglass-half text-3xl"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-gradient-to-r from-green-500 to-green-600 text-white rounded-xl shadow-lg p-5">
            <div class="flex justify-between items-start">
                <div>
                    <h4 class="text-2xl font-bold">{{ pesanan_selesai_belum_bayar }}</h4>
                    <p class="text-white/90">Siap Dibayar</p>
                </div>
                <i class="fas fa-money-bill-wave text-3xl"></i>
            </div>
        </div>
        
        <div class="bg-gradient-to-r from-blue-400 to-blue-500 text-white rounded-xl shadow-lg p-5">
            <div class="flex justify-between items-start">
                <div>
                    <h4 class="text-2xl font-bold">{{ total_meja }}</h4>
                    <p class="text-white/90">Total Meja</p>
                </div>
                <i class="fas fa-chair text-3xl"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Navigation Cards -->
    <div class="row">
        <div class="col-md-6 mb-4">
            <div class="card h-100 border-primary">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <i class="fas fa-utensils fa-4x text-primary"></i>
                    </div>
                    <h4 class="card-title">Kitchen Display</h4>
                    <p class="card-text">Monitor pesanan masuk dan update status memasak</p>
                    <a href="{% url 'kasir:dapur' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-eye me-2"></i>
                        Lihat Dapur
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-6 mb-4">
            <div class="card h-100 border-success">
                <div class="card-body text-center">
                    <div class="mb-3">
                        <i class="fas fa-cash-register fa-4x text-success"></i>
                    </div>
                    <h4 class="card-title">Kasir Dashboard</h4>
                    <p class="card-text">Kelola pembayaran dan cetak receipt</p>
                    <a href="{% url 'kasir:kasir_index' %}" class="btn btn-success btn-lg">
                        <i class="fas fa-calculator me-2"></i>
                        Kasir Dashboard
                    </a>                </div>
            </div>
        </div>
    </div>

    <!-- Main Menu Cards -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
        <!-- Kitchen Display Card -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden border-2 border-blue-100 hover:border-blue-300 transition-all duration-300 card-hover">
            <div class="p-6 flex flex-col items-center text-center">
                <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-utensils text-blue-600 text-3xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Kitchen Display</h3>
                <p class="text-gray-600 mb-6">Monitor pesanan masuk dan update status memasak</p>
                <a href="{% url 'kasir:dapur' %}" class="btn-gradient px-6 py-3 rounded-lg text-white font-medium inline-flex items-center">
                    <i class="fas fa-eye mr-2"></i>
                    Lihat Dapur
                </a>
            </div>
        </div>
        
        <!-- Cashier Dashboard Card -->
        <div class="bg-white rounded-xl shadow-lg overflow-hidden border-2 border-green-100 hover:border-green-300 transition-all duration-300 card-hover">
            <div class="p-6 flex flex-col items-center text-center">
                <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mb-4">
                    <i class="fas fa-cash-register text-green-600 text-3xl"></i>
                </div>
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Kasir Dashboard</h3>
                <p class="text-gray-600 mb-6">Kelola pembayaran dan cetak receipt</p>
                <a href="{% url 'kasir:kasir_index' %}" class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 px-6 py-3 rounded-lg text-white font-medium inline-flex items-center transition-all duration-300 shadow-md hover:shadow-lg transform hover:-translate-y-1">
                    <i class="fas fa-calculator mr-2"></i>
                    Kasir Dashboard
                </a>
            </div>
        </div>
    </div>    <!-- Actions Section -->
    <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
        <div class="bg-gray-50 px-6 py-4 border-b border-gray-100">
            <h3 class="font-semibold text-gray-800">
                <i class="fas fa-bolt mr-2 text-yellow-500"></i>
                Actions
            </h3>
        </div>
        <div class="p-6">
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4">
                <a href="{% url 'home' %}" class="flex flex-col items-center justify-center p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors duration-200">
                    <i class="fas fa-home text-blue-500 text-2xl mb-2"></i>
                    <span class="text-gray-700">Home</span>
                </a>
                        </div>
                                        <a href="{% url 'menu:analytics' %}" class="flex flex-col items-center justify-center p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors duration-200">
                    <i class="fas fa-chart-bar text-blue-500 text-2xl mb-2"></i>
                    <span class="text-gray-700">Analytics</span>
                </a>
                
                <a href="{% url 'menu:qr_codes' %}" class="flex flex-col items-center justify-center p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors duration-200">
                    <i class="fas fa-qrcode text-blue-500 text-2xl mb-2"></i>
                    <span class="text-gray-700">QR Codes</span>
                </a>
                
                <a href="/admin/" class="flex flex-col items-center justify-center p-4 rounded-lg border border-gray-200 hover:border-blue-300 hover:bg-blue-50 transition-colors duration-200">
                    <i class="fas fa-cog text-blue-500 text-2xl mb-2"></i>
                    <span class="text-gray-700">Admin</span>
                </a>
            </div>
        </div>
    </div>
        </div>
    </div>
</div>

    <!-- Additional Information -->
    <div class="bg-blue-50 rounded-xl p-6 border border-blue-100">
        <div class="flex items-center mb-4">
            <i class="fas fa-info-circle text-blue-500 text-xl mr-2"></i>
            <h3 class="font-medium text-blue-800">Informasi Sistem</h3>
        </div>
        <p class="text-blue-700 mb-2">
            Halaman ini akan refresh otomatis setiap 30 detik untuk memperbarui data pesanan.
        </p>
        <p class="text-blue-700 mb-0">
            Anda telah login sebagai <span class="font-semibold">{{ request.user.get_full_name|default:request.user.username }}</span>
            {% if request.user.userprofile %}
            <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 ml-2">
                {{ request.user.userprofile.get_user_type_display }}
            </span>
            {% endif %}
        </p>
    </div>

<script>
// Auto refresh statistics every 30 seconds
setInterval(() => {
    location.reload();
}, 30000);
</script>
{% endblock %}
